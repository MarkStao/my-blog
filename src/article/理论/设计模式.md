---
title: 设计模式
index: true
category:
  - 理论
tags:
  - 设计模式
  - 面向对象
  - 可维护性
---

理解和掌握设计模式是软件架构设计中的重要组成部分，它提供了一套可复用的解决方案，用于应对常见的软件设计问题。在本文中，我们将全面介绍设计模式的理论基础、分类、各模式的具体实现及实际场景应用。

<!-- more -->

## 目录

1. [设计模式简介](#1-设计模式简介)
2. [设计模式的七大原则](#2-设计模式的七大原则)
3. [设计模式分类及总览](#3-设计模式分类及总览)
4. [创建型模式](#4-创建型模式)
    - [单例模式](#41-单例模式)
    - [工厂方法模式](#42-工厂方法模式)
    - [抽象工厂模式](#43-抽象工厂模式)
    - [建造者模式](#44-建造者模式)
    - [原型模式](#45-原型模式)
5. [结构型模式](#5-结构型模式)
    - [适配器模式](#51-适配器模式)
    - [桥接模式](#52-桥接模式)
    - [组合模式](#53-组合模式)
    - [装饰器模式](#54-装饰器模式)
    - [外观模式](#55-外观模式)
    - [享元模式](#56-享元模式)
    - [代理模式](#57-代理模式)
6. [行为型模式](#6-行为型模式)
    - [职责链模式](#61-职责链模式)
    - [命令模式](#62-命令模式)
    - [解释器模式](#63-解释器模式)
    - [迭代器模式](#64-迭代器模式)
    - [中介者模式](#65-中介者模式)
    - [备忘录模式](#66-备忘录模式)
    - [观察者模式](#67-观察者模式)
    - [状态模式](#68-状态模式)
    - [策略模式](#69-策略模式)
    - [模板方法模式](#610-模板方法模式)
    - [访问者模式](#611-访问者模式)
7. [总结](#7-总结)

---

## 1. 设计模式简介

### 什么是设计模式？

设计模式是总结和提炼出的面向对象软件设计的经典解决方案，描述了在特定环境下如何组织和设计类与对象以满足某种特定需求或优化软件结构。

### 为什么需要设计模式？

1. **代码可维护性**：减少代码冗余，提高可扩展性。
2. **开发效率**：避免重复造轮子，提高开发效率。
3. **团队沟通**：通过模式命名和结构达成共识。
4. **代码复用性**：设计模式提供了一种通用的解决问题的方式。

---

## 2. 设计模式的七大原则

| 原则                  | 描述                                                                                  |
|-----------------------|---------------------------------------------------------------------------------------|
| **单一职责原则**       | 一个类只负责一项职责，避免类职责过于复杂。                                                |
| **开闭原则**           | 软件应对扩展开放，对修改封闭，新功能通过扩展实现而不是修改原有代码。                         |
| **里氏替换原则**       | 子类可以替换父类，且应用不会受到影响（确保行为一致性）。                                    |
| **依赖倒置原则**       | 高层模块不应依赖低层模块，二者应依赖于抽象（接口或抽象类）。                                   |
| **接口隔离原则**       | 接口应保持单一，避免类实现不需要的接口方法（接口应小而精）。                                   |
| **合成复用原则**       | 优先使用组合或聚合，而不是继承。                                                            |
| **迪米特法则**         | 类之间应该小范围通信（"最少知道原则"），减少对象之间的耦合度。                                |

---

## 3. 设计模式分类及总览

设计模式根据用途主要分为三大类：

| 类型          | 描述                                                             | 模式名称                                                                                     |
|---------------|------------------------------------------------------------------|---------------------------------------------------------------------------------------------|
| **创建型模式** | 提供创建对象的方式，隐藏对象创建逻辑，提高代码可扩展性和灵活性。                         | 单例、工厂方法、抽象工厂、建造者、原型                                                       |
| **结构型模式** | 关注类和对象如何组成更大的结构，解决类之间的接口或数据关系。                           | 适配器、桥接、组合、装饰器、外观、享元、代理                                                |
| **行为型模式** | 关注对象间的通信与行为分配，描述算法、职责或交互的抽象化。                            | 职责链、命令、解释器、迭代器、中介者、备忘录、观察者、状态、策略、模板方法、访问者           |

---

## 4. 创建型模式

### 4.1 单例模式

#### 定义
确保一个类只有一个实例，并提供一个全局访问点。

#### 应用场景
- 数据库连接池
- 日志管理器

```java
public class Singleton {
    private static Singleton instance;
    private Singleton() {}
    public static synchronized Singleton getInstance() {
        if (instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
}
```

---

### 4.2 工厂方法模式

#### 定义
定义一个创建对象的接口，让子类实例化具体的类。

#### 应用场景
- 简单的产品制造（例如日志记录库）

```java
public interface Product {}
public class ConcreteProduct implements Product {}
public class Factory {
    public Product createProduct() {
        return new ConcreteProduct();
    }
}
```

---

### 4.3 抽象工厂模式

#### 定义
提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们的具体类。

#### 示例：跨平台界面实现
- 抽象工厂：GUIFactory
- 产品族：Button, Checkbox

---

### 4.4 建造者模式

#### 定义
将复杂对象的创建与表示分离，使同样的创建过程可以创建不同的表示。

---

### 4.5 原型模式

#### 定义
通过复制现有对象来创建新对象，而不是通过类实例化。

---

## 5. 结构型模式

### 5.1 适配器模式

#### 定义
将一个接口转换为另一个接口，解决接口不兼容问题。

### 5.2 桥接模式

#### 定义
将抽象部分与实现部分分离，使它们都可以独立变化。

---

### 5.3 组合模式
定义：将对象组合成树形结构以表示“部分-整体”的层次结构，使得客户端对单个对象和组合对象保持一致的处理方式。

---

## 6. 行为型模式

行为型设计模式关注对象之间的通信与职责分配。

---

### 6.5 状态模式
定义：让一个对象在其内部状态改变时，其行为也随之改变。
```java
interface State {
    void handle();
}
class StartState implements State { public void handle() { ... } }
class StopState implements State { public void handle() { ... } }
class Context {
    private State state;
    public void setState(State state) { this.state = state; }
    public void process() { state.handle(); }
}
```

---

## 7. 总结

设计模式是软件设计的宝贵经验，它们通过解决高内聚低耦合、扩展性、灵活性等问题，使软件开发更加高效和可靠。在实际项目中，选择合适的设计模式可以提升代码质量、减少维护成本。
